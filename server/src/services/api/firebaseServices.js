import * as admin from 'firebase-admin';
import { GOOGLE_CONFIG_BASE64 } from '../../config/env';

const string = 'eyJ0eXBlIjoic2VydmljZV9hY2NvdW50IiwicHJvamVjdF9pZCI6ImZ5YmFwYXkiLCJwcml2YXRlX2tleV9pZCI6IjU1NWVmMTBiYjRiYzU1MGY3NzJhMDcyZjJiMTFkMDJhNWNjYzhmOGQiLCJwcml2YXRlX2tleSI6Ii0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLVxuTUlJRXZRSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS2N3Z2dTakFnRUFBb0lCQVFDbWV0bDI4ZkhPMTNWQVxuVjFVVU5LRkpPMmt3UEdsb3JLcVo1TUd5T0lCRmcvQzZuMGRYUkZzV2FuMTd3ZG8xUE42MThFcVdtSXBJdmdYclxuV2RsQkdxc01Vd1ZJRUN1NmFxYzN1MXYrSnd1bTJvMGpYd0RBODFLZ0I0YlQ0WXZ2WjhCUjRVa3A1WG9Hcm5LMVxuZmtNazRVWlEwSm9BTkN5MTRWeVhMTUl1MWhlYnhWSGpza2dSQitmRTg1M05haDNxSzUzOFY1OHlKRjZ3amxYYlxuT0c2a1pIeXhDQU1reEw2eWZxcUtZN3ROUHcrQ1hvd1JNajkwbXB3c0RaV0VOdmhtTnl2UDdUT0tXRzlRSm50L1xuY1VtWmNKdmpka1B4UlVqRnNVWTh0b01HYVFudVZrYkx4NGFpaHVFaWNVNEpMR3FjellWUURpWlUvVW8ya3dFOFxud3U5QStLaDFBZ01CQUFFQ2dnRUFKZG1BWDU2YVQyQ0U4OS9uSS9UalJuY1BiendNNnhOMnBnNXdTMGkxUVJqQ1xuUG12QUdJTWVBbmFybU50MTlPeWw1YzkvNWNWQWkxRkluejJLTzFjSTFJQjdqdXErUmwvQkxOYVlENnhvNWNLQ1xubkN3WlM4VUdZQVBXRDQ0VDlwWXNEM0djNUwyYmhMRmN1dzY5elVDNmI5MDlaaFoybzlOYzdiSHJaQ0tnczNWSFxuU2I1UmE1TXBrR3k1MUdvM0JuSHBMSkdZVlZjNXF1eWJoSzdveWVTQzJMOEJ0UFRVQjBpTUdQTmg4QUNyL0l5TVxuWGJEQmRQUXdzR1FSWDYzMTFieStmSi9LTno1eklHVXQ3eWRSRVplSFpscnNHdlAzaDc3OFBPNHd6ZG9uRlJ3clxuemF3OUVIUzhpRlg2czlsa3FRYnphbCt5Qmd4ek1vODIyeGZYNjlPVkFRS0JnUURTTXVSK3p0SERWVVZpRkZsUlxuenJrZVVjWGlaaDdnMnd5RTBaN1IzSXRXS0NWSWFBN2hFK3lSUk13aGVUTmhuekxwbmlsVDR4YXlnTS9jb1FoUVxudXRXM05VT3VYR2xJdTdqK0QycEw4QSs3Qlk4N2U0eTNCSFNEaVJzci9scGYrbXpZZm92OHZ1c1dObEZaUGVtU1xuekNDWGxWV3pMU0RJZS9YdlZIL0w1Z2NjSlFLQmdRREt3VVVzOGlNV0F0bVBWMmduK3lGbzhjb1RpOFYxQUJQUVxubWx5UE9tUGtyTHBxSDZGd0FGc3l2amFVbmFPeTRpRmcvQjhpQ2EvTXVjdzZLY1lxelRlOFZGRk1KNGdGMFdHaFxuR1o1alNrREVVRW9YakE0b1o1T3lueFhISHZYb0tWTG9aTitKcThYbmJMd0wvZGRIcUZjNG5kOFEvSmRIaVRwSlxudmF6YWxOR0NFUUtCZ1FDVTJ2dWJuY1ZJeWpzL2NOK3NJblJRTjJLbXFPRVhKYWpnNmozSnFxQjJIQ29DODhZTlxudVBsZ0N0TndwUTh4QS9lZkg2VnV4YlBPSjVDTVV2RzdrZ1JGSVJCVUN4ZDRMWkNkUXJkcEhaRldSV0tnb2ljTlxuZUxjMmEwTDF6Y09ja3BEQVpDV29rRitWTkZRNW1iR3VocVpTRXF4RkhpRklPUmo2S3VIeHVHMnlqUUtCZ0RJVVxuNHoxaTRmL0IzSE5ucDdhWWRYd3luVE9PeHN0THBabFZSNStwVUp0ZmZ2eFBxOVM2Z2N4YTU2aDE5OFZyemNyaVxuKzkyd2Z0Z1czTGRSTWozSVN3Z2QyNmJ2N00xakZyWndXWXMxQUNKOW9vK0diTWpXTE1sbU9qN2hDdVM1c0Z6dVxuN2JoWDBaNkVZVDZsQ05RT1pOejdRZW8wT2puVlQ2eC9TWDhFVzJ2QkFvR0FMSkhDVGg2VmVSUFZ6MTB3ZFpYc1xuNjR4a1FPUDNCRGVnODhlcVUwTHlCdFVxZ3N4UkhKaFR6UjIzUGVWenFDNEoxMlltRmpGaG9VcUtmTm9DWStTMlxudm9nVC9VZEZzTzlMYW5zd2JWWkk5NjhqNktmcHc3U25oeFVpOTZWSWw1Yk5xRHdHWkJIL1BrTGtNajBYZG1GUFxuSHlzV214SFdMS1RKL3pNZ3lFTjFvZzQ9XG4tLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tXG4iLCJjbGllbnRfZW1haWwiOiJmaXJlYmFzZS1hZG1pbnNkay10NmVsdkBmeWJhcGF5LmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiY2xpZW50X2lkIjoiMTA1MjQ2MDk0ODcwMDMyOTE3OTQ5IiwiYXV0aF91cmkiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aCIsInRva2VuX3VyaSI6Imh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuIiwiYXV0aF9wcm92aWRlcl94NTA5X2NlcnRfdXJsIjoiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwiY2xpZW50X3g1MDlfY2VydF91cmwiOiJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9yb2JvdC92MS9tZXRhZGF0YS94NTA5L2ZpcmViYXNlLW';

let options;

try {
  options = {
    credential: admin.credential.cert(
      JSON.parse(Buffer.from(`${string}${GOOGLE_CONFIG_BASE64}`, 'base64').toString('ascii'))
    ),
    databaseURL: 'https://fybapay.firebaseio.com',
  };
} catch (error) {
  console.log(error);
}

const FybapayApp = admin.initializeApp(options, 'Fybapay');

const FybapayMessaging = admin.messaging(FybapayApp);

console.log(FybapayApp.name);

console.log({ FybapayMessaging });

export default FybapayMessaging;
